<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Praise FM - Live</title>
    <meta name="theme-color" content="#ff4d00">
    <link rel="icon" type="image/png" sizes="32x32" href="/image/favicon-32x32.png">
    <style>
        :root { --orange:#ff4d00; --dark:#111; --grey:#555; --light-grey:#888; --bg:#fff; --border-color:#ddd; }
        * { margin:0; padding:0; box-sizing:border-box; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif; }
        body { background:var(--bg); color:#000; min-height:100vh; padding-bottom:120px; display:flex; flex-direction:column; align-items:center; }
        .container { width:100%; max-width:900px; padding:20px; text-align:center; }
        .station-title { font-size:32px; font-weight:900; color:var(--orange); margin:20px 0 4px; }
        .station-subtitle { font-size:17px; color:var(--grey); margin-bottom:30px; }
        .circle-container { width:min(80vw,320px); height:min(80vw,320px); margin:0 auto 20px; position:relative; }
        .circle-border { position:absolute; inset:0; border-radius:50%; background:conic-gradient(var(--orange) 0%, transparent 0%);
            mask:radial-gradient(transparent 68%, black 70%); -webkit-mask:radial-gradient(transparent 68%, black 70%); }
        .circle-img { position:absolute; inset:6px; border-radius:50%; overflow:hidden; background:#000; }
        .circle-img img { width:100%; height:100%; object-fit:cover; }
        .live-badge { display:inline-flex; align-items:center; gap:8px; color:var(--orange); font-weight:700; font-size:14px; text-transform:uppercase; letter-spacing:1px; margin-bottom:12px; }
        .live-dot { width:9px; height:9px; background:var(--orange); border-radius:50%; animation:pulse 2s infinite; }
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }
        .program-title { font-size:28px; font-weight:800; margin:10px 0 30px; line-height:1.2; }
        .play-button { margin:40px auto; width:220px; height:56px; background:var(--orange); color:#fff; border:none; border-radius:28px; font-size:18px; font-weight:700; cursor:pointer;
            display:flex; align-items:center; justify-content:center; gap:8px; box-shadow:0 6px 20px rgba(255,77,0,.3); transition:transform .2s; }
        .play-button:hover { transform:scale(1.05); }
        .play-button svg { width:24px; height:24px; fill:#fff; margin-left:10px; }
        .upnext { background:#f8f8f8; border-radius:12px; padding:20px; margin:40px 0; text-align:left; }
        .upnext-items { display:flex; gap:20px; flex-wrap:wrap; }
        .upnext-item { flex:1; min-width:200px; display:flex; align-items:center; gap:16px; }
        .upnext-img { width:60px; height:60px; border-radius:0; object-fit:cover; background:#eee; }
        .upnext-time { font-size:14px; font-weight:700; color:var(--orange); text-transform:uppercase; letter-spacing:0.5px; }
        .upnext-title { font-size:16px; font-weight:700; margin-top:4px; }
        .upnext-desc { font-size:14px; color:var(--grey); margin-top:4px; }
        .recently { margin-top:40px; text-align:left; }
        .recently-header { font-size:13px; font-weight:700; color:var(--grey); text-transform:uppercase; letter-spacing:1px; margin-bottom:12px; }
        .recent-item { display:flex; align-items:center; gap:12px; padding:12px 0; border-bottom:1px solid var(--border-color); }
        .recent-cover { width:48px; height:48px; border-radius:0; object-fit:cover; background:#eee; }
        .recent-title { font-weight:600; font-size:15px; }
        .recent-artist { font-size:13px; color:var(--light-grey); }
        .mini-player {
            position:fixed; bottom:0; left:0; right:0; background:#fff; border-top:1px solid var(--border-color);
            box-shadow:0 -4px 20px rgba(0,0,0,.1); padding:12px 16px; display:none; flex-direction:column; gap:10px; z-index:999;
        }
        .mini-player.show { display:flex; }
        .mini-player-content { display:flex; align-items:center; gap:12px; justify-content:space-between; flex-wrap:wrap; }
        .mini-cover { width:56px; height:56px; border-radius:0; object-fit:cover; background:#eee; }
        .mini-info { flex:1; min-width:0; }
        .mini-title { font-weight:700; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
        .mini-artist { font-size:13px; color:var(--grey); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
        .mini-controls { display:flex; align-items:center; gap:16px; }
        .mini-btn { background:none; border:none; cursor:pointer; padding:8px; }
        .mini-btn svg { width:24px; height:24px; fill:var(--grey); }
        .mini-play { background:var(--orange); width:56px; height:56px; border-radius:50%; display:flex; align-items:center; justify-content:center; border:none; cursor:pointer; box-shadow:0 2px 12px rgba(255,77,0,.35); }
        .mini-play svg { width:20px; height:20px; fill:#fff; }
        .mini-volume { display:flex; align-items:center; gap:4px; width:100px; }
        .mini-volume-bar { flex:1; height:4px; background:#ddd; border-radius:2px; position:relative; cursor:pointer; }
        .mini-volume-fill { height:100%; background:var(--orange); border-radius:2px; width:80%; }
        .mini-track-progress { width:100%; padding:6px 0; }
        .mini-track-bar { width:100%; height:4px; background:#ddd; border-radius:2px; position:relative; cursor:pointer; }
        .mini-track-fill { height:100%; background:var(--orange); border-radius:2px; width:0%; }
        .mini-track-time { display:flex; justify-content:space-between; font-size:11px; color:var(--light-grey); margin-top:4px; }
        @media (max-width:480px) { 
            .mini-player { padding:10px; } 
            .mini-player-content { flex-direction:column; align-items:flex-start; gap:14px; } 
            .mini-play { width:64px; height:64px; }  
            .circle-container { width:260px; height:260px; } 
            .program-title { font-size:24px; } 
            .mini-controls { gap:10px; } 
            .mini-volume { width:80px; } 
        }

        /* üåê Apple-style dropdown */
        #praisefm-locale-bar {
            position: fixed; top: 0; left: 0; right: 0;
            background: rgba(22,22,22,0.98); color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            z-index: 99999; padding: 12px 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2); backdrop-filter: blur(6px);
            display: flex; align-items: center; justify-content: space-between;
        }
        #praisefm-locale-bar .pfm-message { font-size: 15px; line-height: 1.3; }
        .pfm-locale-select { position: relative; display: inline-block; }
        .pfm-locale-select button {
            background: rgba(255,255,255,0.1); color: white; border: none;
            padding: 6px 12px 6px 10px; border-radius: 20px; font-size: 14px;
            cursor: pointer; display: flex; align-items: center; gap: 6px;
        }
        .pfm-locale-select button::after {
            content: "‚ñº"; font-size: 8px; opacity: 0.7;
        }
        .pfm-dropdown {
            position: absolute; top: 100%; right: 0;
            background: #000; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            z-index: 100; display: none; min-width: 200px; overflow: hidden;
        }
        .pfm-dropdown a {
            display: block; color: white; padding: 10px 16px; text-decoration: none;
            font-size: 14px; transition: background 0.2s;
        }
        .pfm-dropdown a:hover { background: #1a1a1a; }
        .pfm-dropdown a span.flag { margin-right: 8px; font-size: 16px; }
        .pfm-locale-select.active .pfm-dropdown { display: block; }
        .pfm-close-btn {
            background: none; border: none; color: #aaa; font-size: 18px;
            margin-left: 12px; cursor: pointer; padding: 4px;
        }
        @media (max-width: 520px) {
            #praisefm-locale-bar { padding: 10px 16px; }
            #praisefm-locale-bar .pfm-message { font-size: 13px; }
        }
        .pfm-bar-shim { height: 56px; display: none; }
        @media (max-width: 520px) { .pfm-bar-shim { height: 64px; } }
    </style>
</head>
<body>

<div id="praisefm-locale-bar" style="display:none;">
    <div class="pfm-message">Your region has a Praise FM version.</div>
    <div class="pfm-locale-select" id="pfm-locale-select">
        <button id="pfm-locale-toggle">
            <span>üåê Select Region</span>
        </button>
        <div class="pfm-dropdown" id="pfm-dropdown">
            <a href="https://praisefmfr.vercel.app" class="pfm-option"><span class="flag">üá´üá∑</span> France</a>
            <a href="https://praisefmde.vercel.app" class="pfm-option"><span class="flag">üá©üá™</span> Germany</a>
            <a href="https://praisefmch-fr.vercel.app" class="pfm-option"><span class="flag">üá®üá≠</span> Switzerland (FR)</a>
            <a href="https://praisefmch-de.vercel.app" class="pfm-option"><span class="flag">üá®üá≠</span> Switzerland (DE)</a>
            <a href="https://praisefmnederland.vercel.app" class="pfm-option"><span class="flag">üá≥üá±</span> Netherlands</a>
        </div>
    </div>
    <button class="pfm-close-btn" id="pfm-close" aria-label="Close">&times;</button>
</div>
<div class="pfm-bar-shim" id="pfm-bar-shim"></div>

<script>
// Apenas o script do banner de localiza√ß√£o (que depende do DOM e location) foi mantido aqui.
(function(){
  const STORAGE_KEY = "praisefm_locale_banner_closed_v2";
  const EXPIRE_DAYS = 30;

  function isClosed() {
    try {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return false;
      const obj = JSON.parse(raw);
      return obj?.ts && (Date.now() - obj.ts) < (EXPIRE_DAYS * 24 * 60 * 60 * 1000);
    } catch (e) { return false; }
  }

  const langs = navigator.languages || [navigator.language || ''];
  let detected = false;
  for (const lang of langs) {
    const l = lang.toLowerCase();
    if (l.startsWith('fr') || l.startsWith('de') || l.startsWith('nl')) {
      detected = true;
      break;
    }
  }

  if (isClosed() || !detected || 
      location.hostname.includes("praisefmfr") || 
      location.hostname.includes("praisefmde") || 
      location.hostname.includes("praisefmch") || 
      location.hostname.includes("praisefmnederland")) {
    return;
  }

  document.getElementById("praisefm-locale-bar").style.display = "flex";
  document.getElementById("pfm-bar-shim").style.display = "block";

  const toggle = document.getElementById("pfm-locale-toggle");
  const dropdown = document.getElementById("pfm-dropdown");
  toggle.addEventListener("click", (e) => {
    e.stopPropagation();
    document.getElementById("pfm-locale-select").classList.toggle("active");
  });

  document.addEventListener("click", () => {
    document.getElementById("pfm-locale-select").classList.remove("active");
  });

  document.getElementById("pfm-close").addEventListener("click", () => {
    try { localStorage.setItem(STORAGE_KEY, JSON.stringify({ts: Date.now()})); } catch(e){}
    document.getElementById("praisefm-locale-bar").style.display = "none";
    document.getElementById("pfm-bar-shim").style.display = "none";
  });
})();
</script>
<div class="container">
    <h1 class="station-title">Praise FM</h1>
    <p class="station-subtitle">Praise & Worship</p>
    <div class="circle-container">
        <div class="circle-border" id="progressRing"></div>
        <div class="circle-img">
            <img id="mainImg" src="/image/logopraisefm.webp" alt="Now Playing">
        </div>
    </div>
    <div class="live-badge"><div class="live-dot"></div> LIVE</div>
    <h2 class="program-title" id="programTitle">Praise FM</h2>
    <button class="play-button" id="bigPlay">
        <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg> Play
    </button>
    <div class="upnext">
        <div class="upnext-items">
            <div class="upnext-item">
                <img id="upnextImg1" src="/image/logopraisefmnonstop.png" class="upnext-img" onerror="this.src='/image/logopraisefmnonstop.png'">
                <div>
                    <div class="upnext-time" id="upnextTime1">-</div>
                    <div class="upnext-title" id="upnextTitle1">-</div>
                    <div class="upnext-desc" id="upnextDesc1">-</div>
                </div>
            </div>
            <div class="upnext-item">
                <img id="upnextImg2" src="/image/praisefmcarpoollogo.webp" class="upnext-img" onerror="this.src='/image/logopraisefm.webp'">
                <div>
                    <div class="upnext-time" id="upnextTime2">-</div>
                    <div class="upnext-title" id="upnextTitle2">-</div>
                    <div class="upnext-desc" id="upnextDesc2">-</div>
                </div>
            </div>
        </div>
    </div>
    <div class="recently">
        <div class="recently-header">Recently played</div>
        <div id="recentList"></div>
    </div>
</div>
<div class="mini-player" id="miniPlayer">
    <div class="mini-player-content">
        <img id="miniImg" src="/image/logopraisefm.webp" class="mini-cover">
        <div class="mini-info">
            <div class="mini-title" id="miniTitle">Praise FM</div>
            <div class="mini-artist" id="miniArtist">Praise & Worship</div>
            <div class="mini-track-progress">
                <div class="mini-track-bar" id="miniTrackBar">
                    <div class="mini-track-fill" id="miniTrackFill" style="width:0%"></div>
                </div>
                <div class="mini-track-time">
                    <span id="miniTrackCurrent">0:00</span>
                    <span id="miniTrackDuration">0:00</span>
                </div>
            </div>
        </div>
        <div class="mini-controls">
            <button class="mini-btn" id="miniRewind">
                <svg viewBox="0 0 24 24"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"/></svg>
            </button>
            <button class="mini-play" id="miniPlayPause">
                <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
            </button>
            <button class="mini-btn" id="miniForward">
                <svg viewBox="0 0 24 24"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/></svg>
            </button>
            <div class="mini-volume">
                <button class="mini-btn" id="miniVolumeIcon">
                    <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                </button>
                <div class="mini-volume-bar" id="miniVolumeBar">
                    <div class="mini-volume-fill" id="miniVolumeFill"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="ToucanPlayer.js"></script> 
</body>
</html>